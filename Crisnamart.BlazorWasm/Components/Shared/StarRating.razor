@* Componente reutilizable de estrellas. Usa Bootstrap Icons (bi-star-fill / bi-star-half / bi-star) *@

@code {
	[Parameter] public double Value { get; set; } = 0.0; // valor entre 0 y Max
	[Parameter] public int Max { get; set; } = 5;
	[Parameter] public string Size { get; set; } = "14px"; // tamaño del icono
	[Parameter] public string FilledColor { get; set; } = "#f59e0b"; // color de estrellas llenas (ámbar)
	[Parameter] public string Class { get; set; } = string.Empty;

	// Valor acotado entre 0..Max (double)
	private double Clamped => Math.Clamp(Value, 0.0, (double)Max);

	// Estrellas completas
	private int FullStars => (int)Math.Floor(Clamped);

	// Mostrar media estrella si la fracción >= 0.5 y no se llega al máximo
	private bool HasHalfStar {
		get {
			var frac = Clamped - Math.Floor(Clamped);
			return frac >= 0.5 && FullStars < Max;
		}
	}
}


<div class="star-rating @Class" role="img" aria-label="@($"Valoración: {Value:0.0}")">
	@for (int i = 1; i <= Max; i++) {
		if (i <= FullStars) {
			<i class="bi bi-star-fill" style="color:@FilledColor; font-size:@Size;" title="@($"{i} de {Max}")"></i>
		} else if (i == FullStars + 1 && HasHalfStar) {
			<i class="bi bi-star-half" style="color:@FilledColor; font-size:@Size;" title="Mitad"></i>
		} else {
			<i class="bi bi-star" style="font-size:@Size;" title="Vacía"></i>
		}
	}
</div>